<% if (!hasKeys) { %>
    <div class="card">
        <h2><i class="fas fa-key"></i> Cáº¥u hÃ¬nh Twitter API</h2>
        <div style="background: #fff3cd; border: 1px solid #ffeaa7; padding: 12px; border-radius: 4px; margin-bottom: 16px; color: #856404;">
            <i class="fas fa-exclamation-triangle"></i> Cáº§n cáº¥u hÃ¬nh Twitter API keys Ä‘á»ƒ sá»­ dá»¥ng tÃ­nh nÄƒng Ä‘Äƒng tweet
        </div>
        <p style="color: var(--text-secondary); margin-bottom: 20px;">
            Vui lÃ²ng chuyá»ƒn sang tab "CÃ i Ä‘áº·t" Ä‘á»ƒ cáº¥u hÃ¬nh Twitter API keys.
        </p>
        <button class="btn btn-primary" onclick="showSection('settings')" style="background: var(--accent-color); color: white; border: 1px solid var(--accent-color); padding: 12px 24px; border-radius: 4px; cursor: pointer;">
            <i class="fas fa-cog"></i> Äi Ä‘áº¿n CÃ i Ä‘áº·t
        </button>
    </div>
<% } else { %>
    <div class="card">
        <h2><i class="fas fa-database"></i> Láº¥y dá»¯ liá»‡u tá»« API theo Page</h2>
        
        <div style="display: flex; gap: 15px; align-items: end; flex-wrap: wrap; margin-bottom: 20px;">
            <div style="flex: 1; min-width: 200px;">
                <label style="display: block; margin-bottom: 8px; font-weight: 500; color: var(--text-primary);"><i class="fas fa-link"></i> URL API Base</label>
                <input id="apiBaseUrl" type="text" placeholder="URL API..." value="https://beiyong.slapibf.com/api.php/provide/art/?ac=detail&t=72" style="width: 100%; padding: 12px 16px; border: 1px solid var(--border-color); border-radius: 4px; font-size: 14px; background: var(--bg-primary); color: var(--text-primary);" />
            </div>
            <div style="width: 100px;">
                <label style="display: block; margin-bottom: 8px; font-weight: 500; color: var(--text-primary);"><i class="fas fa-file-alt"></i> Page</label>
                <input id="apiPage" type="number" min="1" value="1" style="width: 100%; padding: 12px 16px; border: 1px solid var(--border-color); border-radius: 4px; font-size: 14px; background: var(--bg-primary); color: var(--text-primary);" />
            </div>
            <div style="width: 120px;">
                <label style="display: block; margin-bottom: 8px; font-weight: 500; color: var(--text-primary);"><i class="fas fa-list-ol"></i> Sá»‘ lÆ°á»£ng</label>
                <input id="apiLimit" type="number" min="1" max="50" value="10" style="width: 100%; padding: 12px 16px; border: 1px solid var(--border-color); border-radius: 4px; font-size: 14px; background: var(--bg-primary); color: var(--text-primary);" />
            </div>
            <button onclick="fetchPageData()" style="background: #28a745; color: white; border: 1px solid #28a745; padding: 12px 24px; border-radius: 4px; cursor: pointer; height: 50px;">
                <i class="fas fa-download"></i> Láº¥y Page
            </button>
        </div>
        
        <div style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 8px; padding: 24px; margin: 24px 0;">
            <div style="text-align: center; margin-bottom: 24px;">
                <h3 style="color: var(--text-primary); margin-bottom: 12px; font-size: 24px; font-weight: 600;">
                    <i class="fas fa-rocket"></i> Tá»° Äá»˜NG ÄÄ‚NG 1 BÃ€I
                </h3>
                <p style="color: var(--text-secondary); font-size: 14px; margin-bottom: 24px; font-weight: 400;">
                    Láº¥y API â†’ Ná»™i dung cÃ³ sáºµn â†’ Upload trá»±c tiáº¿p â†’ ÄÄƒng lÃªn Twitter
                </p>
                
                <button onclick="autoCreateSchedule()" style="background: var(--accent-color); color: white; border: 1px solid var(--accent-color); padding: 12px 24px; border-radius: 4px; cursor: pointer;">
                    <i class="fas fa-magic"></i> ÄÄ‚NG 1 BÃ€I NGAY
                </button>
            </div>
        </div>
        
        <div style="background: #e7f3ff; border-left: 4px solid #17a2b8; padding: 16px; border-radius: 4px; margin-bottom: 16px; color: var(--text-secondary); font-size: 14px;">
            <i class="fas fa-info-circle"></i> Láº¥y title vÃ  4 hÃ¬nh áº£nh tá»« má»—i bÃ i viáº¿t trong page. CÃ³ thá»ƒ chá»n sá»‘ lÆ°á»£ng bÃ i viáº¿t muá»‘n láº¥y (1-50). Táº¥t cáº£ 4 áº£nh sáº½ Ä‘Æ°á»£c upload trá»±c tiáº¿p lÃªn Twitter (khÃ´ng táº£i vá» mÃ¡y). Sá»­ dá»¥ng "Tá»° Äá»˜NG ÄÄ‚NG 1 BÃ€I" Ä‘á»ƒ Ä‘Äƒng ngay.
        </div>
        
        <div id="pageDataList" style="display: none;">
            <h4 style="margin: 20px 0 15px 0; color: var(--text-primary);"><i class="fas fa-table"></i> Danh sÃ¡ch bÃ i viáº¿t:</h4>
            <div style="overflow-x: auto;">
                <table id="articlesTable" style="width: 100%; border-collapse: collapse; background: white; border: 1px solid var(--border-color); border-radius: 4px; overflow: hidden;">
                    <thead>
                        <tr style="background: var(--bg-secondary);">
                            <th style="padding: 15px; text-align: left; color: var(--text-primary); font-weight: 600;">#</th>
                            <th style="padding: 15px; text-align: left; color: var(--text-primary); font-weight: 600;">TiÃªu Ä‘á»</th>
                            <th style="padding: 15px; text-align: center; color: var(--text-primary); font-weight: 600;">Preview 4 áº£nh</th>
                            <th style="padding: 15px; text-align: center; color: var(--text-primary); font-weight: 600;">Sá»‘ áº£nh</th>
                            <th style="padding: 15px; text-align: center; color: var(--text-primary); font-weight: 600;">Thao tÃ¡c</th>
                        </tr>
                    </thead>
                    <tbody id="articlesTableBody">
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="card">
        <h2><i class="fab fa-twitter"></i> ÄÄƒng Tweet</h2>

        <div style="margin-bottom: 20px;">
            <label style="font-weight: 500; margin-bottom: 8px; color: var(--text-primary); display: flex; align-items: center; gap: 8px; font-size: 14px;"><i class="fas fa-edit"></i> Ná»™i dung tweet</label>
            <textarea id="tweetText" rows="5" placeholder="Nháº­p ná»™i dung tweet hoáº·c sao chÃ©p tá»« API á»Ÿ trÃªn..." oninput="updateCharCount()" style="width: 100%; padding: 12px 16px; border: 1px solid var(--border-color); border-radius: 4px; font-size: 14px; font-family: inherit; background: var(--bg-primary); color: var(--text-primary);"></textarea>
            <div id="charCount" style="text-align: right; font-size: 12px; color: var(--text-secondary); margin-top: 8px; font-weight: 500;">0 / 280</div>
            <div style="background: #e7f3ff; border-left: 4px solid #17a2b8; padding: 16px; border-radius: 4px; margin-top: 16px; color: var(--text-secondary); font-size: 14px;">
                <i class="fas fa-info-circle"></i> Twitter khÃ´ng cho phÃ©p Ä‘Äƒng tweet trÃ¹ng láº·p. HÃ£y thay Ä‘á»•i ná»™i dung hoáº·c thÃªm emoji/thá»i gian Ä‘á»ƒ trÃ¡nh lá»—i.
            </div>
        </div>

        <div style="margin-bottom: 20px;">
            <label style="font-weight: 500; margin-bottom: 8px; color: var(--text-primary); display: flex; align-items: center; gap: 8px; font-size: 14px;"><i class="fas fa-images"></i> URL áº£nh (má»—i dÃ²ng 1 URL, tá»‘i Ä‘a 4)</label>
            <textarea id="imageUrls" rows="2" placeholder="https://example.com/image1.jpg&#10;https://example.com/image2.jpg" oninput="previewImages()" style="width: 100%; padding: 12px 16px; border: 1px solid var(--border-color); border-radius: 4px; font-size: 14px; font-family: inherit; background: var(--bg-primary); color: var(--text-primary);"></textarea>
            
            <!-- Image Preview Area -->
            <div id="imagePreviewArea" style="margin-top: 12px; display: none;">
                <div style="font-weight: 500; margin-bottom: 8px; color: var(--text-primary); font-size: 14px;">
                    <i class="fas fa-eye"></i> Preview áº£nh (sáº½ Ä‘Äƒng lÃªn Twitter):
                </div>
                <div id="imagePreviewContainer" style="display: flex; gap: 8px; flex-wrap: wrap; padding: 12px; background: var(--bg-secondary); border-radius: 4px; border: 1px solid var(--border-color);">
                </div>
            </div>
            
            <div style="background: #e7f3ff; border-left: 4px solid #17a2b8; padding: 16px; border-radius: 4px; margin-top: 16px; color: var(--text-secondary); font-size: 14px;">
                <i class="fas fa-camera"></i> DÃ¡n URL áº£nh trá»±c tiáº¿p (JPG, PNG, GIF, WebP) - Tá»‘i Ä‘a 4 áº£nh sáº½ Ä‘Æ°á»£c upload trá»±c tiáº¿p lÃªn Twitter (khÃ´ng táº¡o file táº¡m thá»i)
            </div>
        </div>

        <div style="display: flex; gap: 12px; flex-wrap: wrap;">
            <button onclick="postTweet()" style="flex: 1; min-width: 200px; background: var(--accent-color); color: white; border: 1px solid var(--accent-color); padding: 12px 24px; border-radius: 4px; cursor: pointer;">
                <i class="fas fa-paper-plane"></i> ÄÄƒng Tweet Ngay
            </button>
            <button onclick="toggleSchedule()" style="flex: 1; min-width: 200px; background: var(--bg-secondary); color: var(--text-primary); border: 1px solid var(--border-color); padding: 12px 24px; border-radius: 4px; cursor: pointer;">
                <i class="fas fa-clock"></i> Láº­p Lá»‹ch ÄÄƒng
            </button>
        </div>
        
        <div id="scheduleSection" style="display: none; margin-top: 20px; padding: 20px; background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 8px;">
            <h4 style="margin-bottom: 15px; color: var(--text-primary);"><i class="fas fa-calendar-alt"></i> Láº­p lá»‹ch Ä‘Äƒng tweet</h4>
            
            <div style="background: #e7f3ff; border-left: 4px solid #17a2b8; padding: 16px; border-radius: 4px; margin-bottom: 15px; color: var(--text-secondary); font-size: 14px;">
                <i class="fas fa-info-circle"></i> Tweet sáº½ Ä‘Æ°á»£c láº­p lá»‹ch trÃªn server vÃ  tá»± Ä‘á»™ng Ä‘Äƒng vÃ o thá»i gian Ä‘Ã£ chá»n.
            </div>
            
            <div style="display: flex; gap: 15px; flex-wrap: wrap; margin-bottom: 15px;">
                <div style="flex: 1; min-width: 200px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: 500; color: var(--text-primary);">ğŸ“… NgÃ y Ä‘Äƒng:</label>
                    <input type="date" id="scheduleDate" style="width: 100%; padding: 12px 16px; border: 1px solid var(--border-color); border-radius: 4px; font-size: 14px; background: var(--bg-primary); color: var(--text-primary);">
                </div>
                <div style="flex: 1; min-width: 150px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: 500; color: var(--text-primary);">â° Giá» Ä‘Äƒng:</label>
                    <input type="time" id="scheduleTime" style="width: 100%; padding: 12px 16px; border: 1px solid var(--border-color); border-radius: 4px; font-size: 14px; background: var(--bg-primary); color: var(--text-primary);">
                </div>
            </div>
            
            <div style="display: flex; gap: 10px;">
                <button onclick="scheduleTweet()" style="flex: 1; background: #28a745; color: white; border: 1px solid #28a745; padding: 12px 24px; border-radius: 4px; cursor: pointer;">
                    <i class="fas fa-calendar-plus"></i> XÃ¡c nháº­n láº­p lá»‹ch
                </button>
                <button onclick="toggleSchedule()" style="flex: 1; background: var(--bg-secondary); color: var(--text-primary); border: 1px solid var(--border-color); padding: 12px 24px; border-radius: 4px; cursor: pointer;">
                    <i class="fas fa-times"></i> Há»§y
                </button>
            </div>
        </div>
        
        <button onclick="clearAll()" style="margin-top: 15px; background: #dc3545; color: white; border: 1px solid #dc3545; padding: 12px 24px; border-radius: 4px; cursor: pointer;">
            <i class="fas fa-trash-alt"></i> XÃ³a táº¥t cáº£
        </button>
    </div>
<% } %>

<div id="msg" style="display: none; padding: 16px 20px; border-radius: 4px; margin-bottom: 16px; font-weight: 500; font-size: 14px; border-left: 4px solid;"></div>

